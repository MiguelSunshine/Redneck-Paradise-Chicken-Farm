
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêî</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêî</text></svg>">
    <title>Chicken-App</title>
    <link rel="manifest" href='data:application/manifest+json,%7B%22name%22%3A%22Redneck%20Paradise%20-%20Chicken%20Farm%22%2C%22short_name%22%3A%22Chicken%20Farm%22%2C%22display%22%3A%22standalone%22%2C%22theme_color%22%3A%22%23B48460%22%2C%22background_color%22%3A%22%23e7f7f0%22%2C%22orientation%22%3A%22portrait%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fsvg%2Bxml%2C%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20100%20100%27%3E%3Ctext%20y%3D%27.9em%27%20font-size%3D%2790%27%3E%F0%9F%90%94%3C%2Ftext%3E%3C%2Fsvg%3E%22%2C%22type%22%3A%22image%2Fsvg%2Bxml%22%2C%22sizes%22%3A%22any%22%2C%22purpose%22%3A%22any%20maskable%22%7D%5D%7D'>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-bg-gradient-start: #fdf8f0;
            --color-bg-gradient-end: #f8f4e8;
            --color-surface: #FFFFFF;
            --color-text-primary: #5C3D2E;
            --color-text-secondary: #8C6A47;
            --color-primary: #A0937D;
            --color-primary-hover: #897C69;
            --color-accent: #E5A044;
            --color-accent-hover: #D89133;
            --color-border: #EAE0D5;

            --bg-main: linear-gradient(to bottom right, var(--color-bg-gradient-start), var(--color-bg-gradient-end));
            --bg-card: var(--color-surface);
            --text-color: var(--color-text-primary);
            --text-color-light: var(--color-text-secondary);
            --header-bg: var(--color-text-primary);
            --header-text: #FFFFFF;
            --modal-bg: #FAF8F1;
            --modal-border: var(--color-border);
            --button-bg: var(--color-primary);
            --button-hover: var(--color-primary-hover);
            --input-border: var(--color-border);
        }

        html.dark {
            --color-bg-dark: #2C2825;
            --color-surface-dark: #3E3834;
            --color-text-primary-dark: #EAE0D5;
            --color-text-secondary-dark: #B9A89B;
            --color-primary-dark: #727964;
            --color-primary-hover-dark: #8F9779;
            --color-border-dark: #5C524B;
            --color-accent: #E5A044;
            --color-accent-hover: #D89133;

            --bg-main: var(--color-bg-dark);
            --bg-card: var(--color-surface-dark);
            --text-color: var(--color-text-primary-dark);
            --text-color-light: var(--color-text-secondary-dark);
            --header-bg: #000000;
            --header-text: #FFFFFF;
            --modal-bg: #4A443F;
            --modal-border: var(--color-border-dark);
            --button-bg: var(--color-primary-dark);
            --button-hover: var(--color-primary-hover-dark);
            --input-border: var(--color-border-dark);
        }


        body {
            font-family: 'Quicksand', sans-serif;
            background: var(--bg-main);
            color: var(--text-color);
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none;   /* Safari */
            -khtml-user-select: none;    /* Konqueror HTML */
            -moz-user-select: none;      /* Old versions of Firefox */
            -ms-user-select: none;       /* Internet Explorer/Edge */
            user-select: none;           /* Non-prefixed version, currently supported by Chrome, Opera and Firefox */
        }
        h1, h2, h3, h4, button, label, p {
           font-family: 'Quicksand', sans-serif;
           color: inherit;
        }
        input, select, option, textarea {
            font-family: 'Quicksand', sans-serif;
            color: inherit;
            background-color: var(--bg-card);
            border-color: var(--input-border);
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
            /* Verhindere Zoom auf iOS bei Input-Fokus */
            font-size: 16px !important;
        }
        /* Zus√§tzliche iOS-spezifische Optimierung f√ºr Inputs */
        @supports (-webkit-touch-callout: none) {
            input, select, textarea {
                font-size: 16px !important;
            }
        }
        .farm-header {
            background-color: var(--header-bg);
            color: var(--header-text);
        }
        .fire-text {
            color: #ffffff;
            text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #ff4500, 0 0 20px #ff4500, 0 0 25px #ff4500, 0 0 30px #ff4500, 0 0 35px #ff4500;
            animation: fire-flicker 2s infinite alternate;
        }
        @keyframes fire-flicker {
            0% { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #ff4500, 0 0 20px #ff4500, 0 0 25px #ff4500, 0 0 30px #ff4500; }
            20% { text-shadow: 0 0 6px #fff, 0 0 12px #fff, 0 0 18px #ff4500, 0 0 24px #ff4500, 0 0 30px #ff4500, 0 0 36px #ff4500; }
            40% { text-shadow: 0 0 4px #fff, 0 0 8px #fff, 0 0 12px #ff4500, 0 0 16px #ff4500, 0 0 20px #ff4500, 0 0 24px #ff4500; }
            60% { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #ff4500, 0 0 20px #ff4500, 0 0 25px #ff4500, 0 0 30px #ff4500; }
            80% { text-shadow: 0 0 7px #fff, 0 0 14px #fff, 0 0 21px #ff4500, 0 0 28px #ff4500, 0 0 35px #ff4500, 0 0 42px #ff4500; }
            100% { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #ff4500, 0 0 20px #ff4500, 0 0 25px #ff4500, 0 0 30px #ff4500; }
        }
        .card {
            background-color: var(--bg-card);
            box-shadow: 8px 8px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
            border-radius: 20px;
            border: 4px dashed transparent;
            position: relative;
            overflow: hidden;
        }
        #dashboard-grid .card {
             cursor: pointer;
        }
        .card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 12px 12px 20px rgba(0, 0, 0, 0.15);
        }
        .modal-content {
            background-color: var(--modal-bg);
            border-color: var(--modal-border);
            border-style: dashed;
            border-width: 3px;
            border-radius: 20px;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
            transform: scale(0.95);
        }
        .sponsor-color-dot {
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
            border: 1px solid rgba(0,0,0,0.1);
        }
        .dragging {
            opacity: 0.9 !important;
            transform: scale(1.03) rotate(2deg) !important;
            box-shadow: 0 15px 30px rgba(0,0,0,0.3) !important;
            cursor: grabbing !important;
            z-index: 1000;
        }
        .settings-mode .card {
            cursor: grab;
        }
        .switch { position: relative; display: inline-block; width: 60px; height: 34px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #2196F3; }
        input:checked + .slider:before { transform: translateX(26px); }
        
        #image-preview-container img, .animal-list-card img, .sponsor-list-card img, .detail-image {
            object-fit: cover;
            object-position: center;
        }
        .cropper-view-box, .cropper-face { border-radius: 50%; }
        .cropper-container { max-width: 100%; max-height: 60vh; }
    </style>
</head>
<body>

    <header class="farm-header p-4 shadow-lg sticky top-0 z-40 text-center">
        <div class="container mx-auto flex justify-center items-center">
              <h1 class="text-3xl md:text-5xl font-bold tracking-wider break-words fire-text">
                  <span class="inline-block">Redneck Parad‚úäse</span> <span class="inline-block">- Chicken Farm</span>
              </h1>
        </div>
    </header>

    <nav class="bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm p-2 shadow-md sticky top-[88px] md:top-[104px] z-30">
        <div class="container mx-auto flex flex-wrap justify-center gap-2 md:gap-4">
            <button id="nav-overview" class="bg-[var(--button-bg)] text-white font-bold py-2 px-4 rounded-full text-sm md:text-base hover:bg-[var(--button-hover)] transition-colors duration-200">üè† √úbersicht</button>
            <button id="nav-animals" class="bg-[var(--button-bg)] text-white font-bold py-2 px-4 rounded-full text-sm md:text-base hover:bg-[var(--button-hover)] transition-colors duration-200">üêî Tiere</button>
            <button id="nav-sponsors" class="bg-[var(--button-bg)] text-white font-bold py-2 px-4 rounded-full text-sm md:text-base hover:bg-[var(--button-hover)] transition-colors duration-200">‚ú® Paten</button>
            <button id="nav-eggs" class="bg-[var(--button-bg)] text-white font-bold py-2 px-4 rounded-full text-sm md:text-base hover:bg-[var(--button-hover)] transition-colors duration-200">ü•ö Eier-Logbuch</button>
            <button id="nav-data" class="bg-[var(--button-bg)] text-white font-bold py-2 px-4 rounded-full text-sm md:text-base hover:bg-[var(--button-hover)] transition-colors duration-200">üíæ Daten-Management</button>
            <button id="nav-unsponsored" class="bg-[var(--button-bg)] text-white font-bold py-2 px-4 rounded-full text-sm md:text-base hover:bg-[var(--button-hover)] transition-colors duration-200">‚ùì Ohne Paten</button>
            <button id="nav-add-new" class="bg-[var(--button-bg)] text-white font-bold py-2 px-4 rounded-full text-sm md:text-base hover:bg-[var(--button-hover)] transition-colors duration-200">‚ûï Neu anlegen</button>
            <button id="nav-settings" class="bg-[var(--button-bg)] text-white font-bold py-2 px-4 rounded-full text-sm md:text-base hover:bg-[var(--button-hover)] transition-colors duration-200">‚öôÔ∏è Einstellungen</button>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-8">
        <div id="dashboard-grid" class="grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
            <div id="card-egg-entry" class="card p-4 sm:p-6 col-span-2">
                <h2 class="text-xl sm:text-2xl font-bold mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 h-6 w-6 sm:h-7 sm:w-7"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path></svg>
                    T√§gliche Eier eintragen
                </h2>
                <form id="egg-form" class="grid grid-cols-1 sm:grid-cols-2 gap-4 items-end">
                    <div>
                        <label for="chicken-eggs" class="block font-semibold mb-1 text-sm sm:text-base">H√ºhnereier ü•ö</label>
                        <input type="number" id="chicken-eggs" min="0" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--color-accent)]" placeholder="Anzahl">
                    </div>
                    <div>
                        <label for="duck-eggs" class="block font-semibold mb-1 text-sm sm:text-base">Enteneier ü•ö</label>
                        <input type="number" id="duck-eggs" min="0" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-[var(--color-accent)]" placeholder="Anzahl">
                    </div>
                    <button type="submit" class="w-full sm:col-span-2 bg-[var(--color-accent)] text-white font-bold py-2 px-4 rounded-full hover:bg-[var(--color-accent-hover)] transition-all duration-300 shadow-lg transform hover:-translate-y-px mt-2">Speichern</button>
                </form>
            </div>
            <div id="card-animals" class="card p-4 sm:p-6 text-center">
                <div class="text-4xl sm:text-5xl lg:text-6xl mb-2">üêî</div>
                <h3 class="text-xl sm:text-2xl font-bold">Tier√ºbersicht</h3>
                <p class="text-sm sm:text-base">H√ºhner: <span id="chicken-count">0</span></p>
                <p class="text-sm sm:text-base">Enten: <span id="duck-count">0</span></p>
            </div>
            <div id="card-sponsors" class="card p-4 sm:p-6 text-center">
                <div class="text-4xl sm:text-5xl lg:text-6xl mb-2">‚ù§Ô∏è</div>
                <h3 class="text-xl sm:text-2xl font-bold">Paten√ºbersicht</h3>
                <p class="text-sm sm:text-base">Paten gesamt: <span id="sponsor-count">0</span></p>
                <p class="text-sm sm:text-base">Aktive Paten: <span id="sponsored-animals-count">0</span></p>
            </div>
            <div id="card-unsponsored" class="card p-4 sm:p-6 flex flex-col items-center justify-center">
                <h3 class="text-xl sm:text-2xl font-bold text-center mb-2">Tiere ohne Paten</h3>
                <div class="relative w-32 h-32 sm:w-40 sm:h-40">
                    <canvas id="unsponsored-chart"></canvas>
                    <div class="absolute inset-0 flex flex-col items-center justify-center text-center pointer-events-none">
                        <span id="unsponsored-count-text" class="text-2xl sm:text-3xl font-bold">0</span>
                        <span class="text-xs sm:text-sm text-[var(--text-color-light)]">ohne Paten</span>
                    </div>
                </div>
            </div>
            <div id="card-eggs" class="card p-4 sm:p-6 text-center">
                <div class="text-4xl sm:text-5xl lg:text-6xl mb-2">üìú</div>
                <h3 class="text-xl sm:text-2xl font-bold">Eier Logbuch</h3>
                <p class="text-sm sm:text-base">H√ºhnereier (heute): <span id="egg-chicken-today">0</span></p>
                <p class="text-sm sm:text-base">Enteneier (heute): <span id="egg-duck-today">0</span></p>
            </div>
             <div id="card-add-new" class="card p-4 sm:p-6 text-center flex flex-col justify-center items-center">
                <div class="text-4xl sm:text-5xl lg:text-6xl mb-2">‚ûï</div>
                <h3 class="text-xl sm:text-2xl font-bold mb-2 sm:mb-4">Neu anlegen</h3>
                <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                    <button id="add-animal-shortcut" class="bg-green-500 text-white font-bold py-2 px-3 text-sm sm:px-4 sm:text-base rounded-full hover:bg-green-600">Tier</button>
                    <button id="add-sponsor-shortcut" class="bg-blue-500 text-white font-bold py-2 px-3 text-sm sm:px-4 sm:text-base rounded-full hover:bg-blue-600">Pate</button>
                </div>
            </div>
             <div id="card-data" class="card p-4 sm:p-6 text-center flex flex-col justify-center items-center">
                <div class="text-4xl sm:text-5xl lg:text-6xl mb-2">üíæ</div>
                <h3 class="text-xl sm:text-2xl font-bold">Dateimanagement</h3>
                <p class="text-sm sm:text-base text-center">Daten up- & downloaden</p>
            </div>
             <div id="card-settings" class="card p-4 sm:p-6 text-center flex flex-col justify-center items-center">
                <div class="text-4xl sm:text-5xl lg:text-6xl mb-2">‚öôÔ∏è</div>
                <h3 class="text-xl sm:text-2xl font-bold">Einstellungen</h3>
                <p class="text-sm sm:text-base">Layout anpassen</p>
            </div>
        </div>
    </main>
    
    <div id="modal-container"></div>
    
    <div id="toast" class="fixed bottom-5 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg opacity-0 transition-opacity duration-500">
        Gespeichert!
    </div>

    <script type="module" src="./index.js"></script>
</body>
</html>